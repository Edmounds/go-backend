{
  "openapi": "3.0.1",
  "info": {
    "title": "微信小程序",
    "description": "微信小程序后端API文档",
    "version": "1.0.0"
  },
  "tags": [
    {
      "name": "Auth"
    },
    {
      "name": "User"
    },
    {
      "name": "Store"
    },
    {
      "name": "Progress"
    },
    {
      "name": "Cards"
    },
    {
      "name": "Referrals"
    },
    {
      "name": "Agent"
    },
    {
      "name": "Payment"
    },
    {
      "name": "System"
    }
  ],
  "paths": {
    "/api/auth": {
      "post": {
        "summary": "用户登录",
        "deprecated": false,
        "description": "用户使用微信code进行登录，成功后返回JWT Token",
        "tags": [
          "Auth"
        ],
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "code"
                ],
                "properties": {
                  "code": {
                    "type": "string",
                    "description": "微信登录code",
                    "example": "061Fmll0143S8X1EMGo0167W4q3Fmllf"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "登录成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LoginResponse"
                },
                "example": {
                  "code": 200,
                  "message": "登录成功",
                  "data": {
                    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
                    "user": {
                      "_id": "507f1f77bcf86cd799439011",
                      "openID": "oGZUI0egBJY1zhBY2E5hrWOjn_fs",
                      "user_name": "john_doe",
                      "school": "北京大学",
                      "age": 20,
                      "agent_level": 0,
                      "referral_code": "JOHN123"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "认证失败",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "security": []
      }
    },
    "/api/auth/refresh": {
      "post": {
        "summary": "刷新Token",
        "deprecated": false,
        "description": "刷新JWT Token",
        "tags": [
          "Auth"
        ],
        "responses": {
          "200": {
            "description": "Token刷新成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/api/users": {
      "post": {
        "summary": "填写用户信息",
        "deprecated": false,
        "description": "新用户注册账号",
        "tags": [
          "User"
        ],
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "user_name",
                  "school",
                  "phone",
                  "user_password",
                  "city"
                ],
                "properties": {
                  "user_name": {
                    "type": "string",
                    "description": "用户名",
                    "example": "jane_smith"
                  },
                  "user_password": {
                    "type": "string",
                    "description": "用户密码"
                  },
                  "age": {
                    "type": "integer",
                    "description": "年龄",
                    "example": 19
                  },
                  "school": {
                    "type": "string",
                    "description": "学校",
                    "example": "清华大学"
                  },
                  "phone": {
                    "type": "string",
                    "description": "手机号",
                    "example": "13800138000"
                  },
                  "class": {
                    "type": "string",
                    "description": "班级",
                    "example": "计算机科学与技术1班"
                  },
                  "referred_by": {
                    "type": "string",
                    "description": "推荐码",
                    "example": "JOHN123"
                  },
                  "city": {
                    "type": "string",
                    "description": "城市"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "注册成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "409": {
            "description": "用户已存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "security": []
      }
    },
    "/api/users/{user_id}": {
      "get": {
        "summary": "获取用户信息",
        "deprecated": false,
        "description": "获取用户详细信息",
        "tags": [
          "User"
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "description": "用户ID（openID）",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "获取用户信息成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponse"
                }
              }
            }
          },
          "404": {
            "description": "用户不存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      },
      "put": {
        "summary": "更新用户信息",
        "deprecated": false,
        "description": "更新用户的基本信息",
        "tags": [
          "User"
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "description": "用户ID（openID）",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "age": {
                    "type": "integer",
                    "description": "年龄"
                  },
                  "school": {
                    "type": "string",
                    "description": "学校"
                  },
                  "phone": {
                    "type": "string",
                    "description": "手机号"
                  },
                  "class": {
                    "type": "string",
                    "description": "班级"
                  },
                  "city": {
                    "type": "string",
                    "description": "城市"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "用户信息更新成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponse"
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "用户不存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/api/admin/users/{user_id}/agent-level": {
      "put": {
        "summary": "更新代理等级",
        "deprecated": false,
        "description": "管理员更新用户代理等级",
        "tags": [
          "User"
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "description": "用户ID（openID）",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "agent_level"
                ],
                "properties": {
                  "agent_level": {
                    "type": "integer",
                    "enum": [0, 1, 2],
                    "description": "代理等级"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "代理等级更新成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/api/products": {
      "get": {
        "summary": "获取所有商品",
        "deprecated": false,
        "description": "获取商城中所有可用的商品列表",
        "tags": [
          "Store"
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "页码",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "每页数量",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "获取商品列表成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductListResponse"
                }
              }
            }
          }
        },
        "security": []
      }
    },
    "/api/product/{product_id}": {
      "get": {
        "summary": "获取特定商品详情",
        "deprecated": false,
        "description": "根据商品ID获取商品的详细信息",
        "tags": [
          "Store"
        ],
        "parameters": [
          {
            "name": "product_id",
            "in": "path",
            "description": "商品ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "获取商品详情成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProductResponse"
                }
              }
            }
          },
          "404": {
            "description": "商品不存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        },
        "security": []
      }
    },
    "/api/users/{user_id}/cart": {
      "post": {
        "summary": "添加商品到购物车",
        "deprecated": false,
        "description": "将指定商品添加到用户的购物车中",
        "tags": [
          "Store"
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "description": "用户ID（openID）",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "product_id",
                  "quantity"
                ],
                "properties": {
                  "product_id": {
                    "type": "string",
                    "description": "商品ID"
                  },
                  "quantity": {
                    "type": "integer",
                    "minimum": 1,
                    "description": "商品数量"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "添加到购物车成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CartResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/api/users/{user_id}/orders": {
      "post": {
        "summary": "从购物车创建订单",
        "deprecated": false,
        "description": "将购物车中的商品创建为订单",
        "tags": [
          "Store"
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "description": "用户ID（openID）",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "address_id",
                  "payment_method"
                ],
                "properties": {
                  "address_id": {
                    "type": "string",
                    "description": "收货地址ID"
                  },
                  "payment_method": {
                    "type": "string",
                    "enum": [
                      "wechat_pay"
                    ],
                    "description": "支付方式"
                  },
                  "referral_code": {
                    "type": "string",
                    "description": "推荐码（可选）"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "订单创建成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrderResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      },
      "get": {
        "summary": "获取订单历史",
        "deprecated": false,
        "description": "获取用户的所有订单历史记录",
        "tags": [
          "Store"
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "description": "用户ID（openID）",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "status",
            "in": "query",
            "description": "订单状态筛选",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "pending",
                "paid",
                "shipped",
                "delivered",
                "cancelled"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "获取订单历史成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrderListResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/api/users/{user_id}/orders/pay": {
      "post": {
        "summary": "创建微信支付订单",
        "deprecated": false,
        "description": "为指定订单创建微信支付",
        "tags": [
          "Payment"
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "description": "用户ID（openID）",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "order_id"
                ],
                "properties": {
                  "order_id": {
                    "type": "string",
                    "description": "订单ID"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "支付订单创建成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WechatPayResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/api/wechat/pay/notify": {
      "post": {
        "summary": "微信支付回调通知",
        "deprecated": false,
        "description": "接收微信支付结果通知",
        "tags": [
          "Payment"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "description": "微信支付回调数据"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "处理成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "string",
                      "example": "SUCCESS"
                    },
                    "message": {
                      "type": "string",
                      "example": "成功"
                    }
                  }
                }
              }
            }
          }
        },
        "security": []
      }
    },
    "/api/books": {
      "get": {
        "summary": "获取书籍列表",
        "deprecated": false,
        "description": "获取所有可用的教材书籍",
        "tags": [
          "Progress"
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "页码",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "每页数量",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "获取书籍列表成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BookListResponse"
                }
              }
            }
          }
        },
        "security": []
      }
    },
    "/api/users/{user_id}/progress": {
      "get": {
        "summary": "获取用户学习进度",
        "deprecated": false,
        "description": "获取用户当前的学习进度信息",
        "tags": [
          "Progress"
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "description": "用户ID（openID）",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "获取学习进度成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProgressResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      },
      "put": {
        "summary": "更新用户学习进度",
        "deprecated": false,
        "description": "更新用户的学习进度信息",
        "tags": [
          "Progress"
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "description": "用户ID（openID）",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "current_unit": {
                    "type": "string",
                    "description": "当前单元"
                  },
                  "learned_words": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "新学会的单词列表"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "学习进度更新成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProgressResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/api/books/{book_id}/words": {
      "get": {
        "summary": "获取书籍单词",
        "deprecated": false,
        "description": "获取指定书籍的所有单词",
        "tags": [
          "Progress"
        ],
        "parameters": [
          {
            "name": "book_id",
            "in": "path",
            "description": "书籍ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "unit_id",
            "in": "query",
            "description": "单元ID筛选",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "获取单词列表成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WordListResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/api/units/{unit_id}/words": {
      "get": {
        "summary": "根据单元ID获取单词",
        "deprecated": false,
        "description": "根据单元ID获取该单元的所有单词列表",
        "tags": [
          "Cards"
        ],
        "parameters": [
          {
            "name": "unit_id",
            "in": "path",
            "description": "单元ID",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "获取单词列表成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WordListResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/api/words/{word_name}/card": {
      "get": {
        "summary": "根据单词名称获取卡片",
        "deprecated": false,
        "description": "根据单词名称获取单词卡片详细信息（包括图片）",
        "tags": [
          "Cards"
        ],
        "parameters": [
          {
            "name": "word_name",
            "in": "path",
            "description": "单词名称",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "获取单词卡片成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WordCardResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/api/words": {
      "get": {
        "summary": "通过单元名称和书籍名称获取单词",
        "deprecated": false,
        "description": "通过单元名称和书籍名称获取单词列表",
        "tags": [
          "Cards"
        ],
        "parameters": [
          {
            "name": "unit_name",
            "in": "query",
            "description": "单元名称",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "book_name",
            "in": "query",
            "description": "书籍名称",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "获取单词列表成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WordListResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/api/referrals/validate": {
      "post": {
        "summary": "验证推荐码",
        "deprecated": false,
        "description": "验证推荐码是否有效，并返回推荐人信息",
        "tags": [
          "Referrals"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "referral_code"
                ],
                "properties": {
                  "referral_code": {
                    "type": "string",
                    "description": "要验证的推荐码"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "推荐码验证成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReferralValidationResponse"
                }
              }
            }
          }
        },
        "security": []
      }
    },
    "/api/users/{user_id}/referral": {
      "get": {
        "summary": "获取用户推荐信息",
        "deprecated": false,
        "description": "获取用户的推荐码和推荐统计信息",
        "tags": [
          "Referrals"
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "description": "用户ID（openID）",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "获取推荐信息成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReferralResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/api/referrals": {
      "post": {
        "summary": "跟踪推荐关系",
        "deprecated": false,
        "description": "记录用户使用推荐码的关系",
        "tags": [
          "Referrals"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "referral_code",
                  "referred_user_id"
                ],
                "properties": {
                  "referral_code": {
                    "type": "string",
                    "description": "推荐码"
                  },
                  "referred_user_id": {
                    "type": "string",
                    "description": "被推荐用户ID（openID）"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "推荐关系记录成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/api/users/{user_id}/referral/commissions": {
      "get": {
        "summary": "查看返现记录",
        "deprecated": false,
        "description": "获取用户的佣金返现记录",
        "tags": [
          "Referrals"
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "description": "用户ID（openID）",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "status",
            "in": "query",
            "description": "佣金状态筛选",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "pending",
                "paid",
                "cancelled"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "获取返现记录成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CommissionListResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/api/wxacode/unlimited": {
      "post": {
        "summary": "生成不限制小程序码",
        "deprecated": false,
        "description": "服务端代理获取不限制小程序码",
        "tags": [
          "Referrals"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "scene"
                ],
                "properties": {
                  "scene": {
                    "type": "string",
                    "description": "场景值，最大32个可见字符"
                  },
                  "page": {
                    "type": "string",
                    "description": "必须是已经发布的小程序存在的页面"
                  },
                  "check_path": {
                    "type": "boolean",
                    "description": "检查page是否存在"
                  },
                  "env_version": {
                    "type": "string",
                    "description": "要打开的小程序版本"
                  },
                  "width": {
                    "type": "integer",
                    "description": "二维码的宽度"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "生成小程序码成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/QRCodeResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/api/agents/{user_id}/users": {
      "get": {
        "summary": "列出代理管理的用户",
        "deprecated": false,
        "description": "获取代理管理的所有用户列表",
        "tags": [
          "Agent"
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "description": "代理用户ID（openID）",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "school",
            "in": "query",
            "description": "学校筛选（校代理）",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "region",
            "in": "query",
            "description": "地区筛选（区域代理）",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "获取管理用户列表成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgentUserListResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/api/agents/{user_id}/sales": {
      "get": {
        "summary": "列出所有代理销售数据和佣金",
        "deprecated": false,
        "description": "获取代理的销售统计数据和佣金信息",
        "tags": [
          "Agent"
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "description": "代理用户ID（openID）",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "start_date",
            "in": "query",
            "description": "开始日期",
            "required": false,
            "schema": {
              "type": "string",
              "format": "date"
            }
          },
          {
            "name": "end_date",
            "in": "query",
            "description": "结束日期",
            "required": false,
            "schema": {
              "type": "string",
              "format": "date"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "获取销售数据成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgentSalesResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/api/agents/{user_id}/withdraw": {
      "post": {
        "summary": "提取佣金",
        "deprecated": false,
        "description": "代理用户申请提取可用佣金",
        "tags": [
          "Agent"
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "description": "代理用户ID（openID）",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "amount",
                  "withdraw_method"
                ],
                "properties": {
                  "amount": {
                    "type": "number",
                    "minimum": 0.01,
                    "description": "提取金额"
                  },
                  "withdraw_method": {
                    "type": "string",
                    "enum": [
                      "wechat",
                      "alipay",
                      "bank_transfer"
                    ],
                    "description": "提取方式"
                  },
                  "account_info": {
                    "type": "object",
                    "description": "账户信息",
                    "properties": {
                      "account_name": {
                        "type": "string",
                        "description": "账户名"
                      },
                      "account_number": {
                        "type": "string",
                        "description": "账户号码"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "提取申请提交成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WithdrawResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ]
      }
    },
    "/health": {
      "get": {
        "summary": "健康检查",
        "deprecated": false,
        "description": "检查服务运行状态",
        "tags": [
          "System"
        ],
        "responses": {
          "200": {
            "description": "服务运行正常",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthResponse"
                }
              }
            }
          }
        },
        "security": []
      }
    }
  },
  "components": {
    "schemas": {
      "User": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string",
            "description": "用户唯一标识"
          },
          "openID": {
            "type": "string",
            "description": "微信openID，作为主要标识符"
          },
          "user_name": {
            "type": "string",
            "description": "用户名"
          },
          "class": {
            "type": "string",
            "description": "班级"
          },
          "age": {
            "type": "integer",
            "description": "年龄"
          },
          "school": {
            "type": "string",
            "description": "学校"
          },
          "phone": {
            "type": "string",
            "description": "手机号"
          },
          "city": {
            "type": "string",
            "description": "城市"
          },
          "agent_level": {
            "type": "integer",
            "enum": [0, 1, 2],
            "description": "代理等级 (0: 非代理, 1: 校代理, 2: 区域代理)"
          },
          "referral_code": {
            "type": "string",
            "description": "用户的推荐码"
          },
          "referred_by": {
            "type": "string",
            "description": "使用的推荐码"
          },
          "collected_cards": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "收集的卡片ID列表"
          },
          "addresses": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Address"
            },
            "description": "地址列表"
          },
          "progress": {
            "$ref": "#/components/schemas/Progress"
          },
          "is_agent": {
            "type": "boolean",
            "description": "是否为代理"
          },
          "agent_type": {
            "type": "string",
            "enum": ["school", "region"],
            "description": "代理类型"
          },
          "managed_schools": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "代理管理的学校（校代理）"
          },
          "managed_regions": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "代理管理的地区（区域代理）"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "创建时间"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "更新时间"
          }
        }
      },
      "Progress": {
        "type": "object",
        "properties": {
          "current_unit": {
            "type": "string",
            "description": "当前单元"
          },
          "learned_words": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "已学单词列表"
          }
        }
      },
      "Address": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string",
            "description": "地址唯一标识"
          },
          "user_openid": {
            "type": "string",
            "description": "用户openID"
          },
          "recipient_name": {
            "type": "string",
            "description": "收件人姓名"
          },
          "phone": {
            "type": "string",
            "description": "收件人电话"
          },
          "province": {
            "type": "string",
            "description": "省份"
          },
          "city": {
            "type": "string",
            "description": "城市"
          },
          "district": {
            "type": "string",
            "description": "区县"
          },
          "street": {
            "type": "string",
            "description": "详细地址"
          },
          "postal_code": {
            "type": "string",
            "description": "邮政编码"
          },
          "is_default": {
            "type": "boolean",
            "description": "是否为默认地址"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "创建时间"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "更新时间"
          }
        }
      },
      "Word": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "单词唯一标识"
          },
          "word_name": {
            "type": "string",
            "description": "单词名称"
          },
          "word_meaning": {
            "type": "string",
            "description": "单词含义"
          },
          "pronunciation_url": {
            "type": "string",
            "description": "发音文件URL"
          },
          "img_url": {
            "type": "string",
            "description": "图片URL"
          },
          "unit_id": {
            "type": "string",
            "description": "所属单元ID"
          },
          "book_id": {
            "type": "string",
            "description": "所属书籍ID"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "创建时间"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "更新时间"
          }
        }
      },
      "Product": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string",
            "description": "商品唯一标识"
          },
          "product_id": {
            "type": "string",
            "description": "商品编号"
          },
          "name": {
            "type": "string",
            "description": "商品名称"
          },
          "price": {
            "type": "number",
            "description": "商品价格"
          },
          "description": {
            "type": "string",
            "description": "商品描述"
          },
          "stock": {
            "type": "integer",
            "description": "库存数量"
          },
          "images": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "商品图片URL列表"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "创建时间"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "更新时间"
          }
        }
      },
      "Cart": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string",
            "description": "购物车唯一标识"
          },
          "cart_id": {
            "type": "string",
            "description": "购物车编号"
          },
          "user_openid": {
            "type": "string",
            "description": "用户openID"
          },
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CartItem"
            }
          },
          "total_amount": {
            "type": "number",
            "description": "总金额"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "创建时间"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "更新时间"
          }
        }
      },
      "CartItem": {
        "type": "object",
        "properties": {
          "product_id": {
            "type": "string",
            "description": "商品ID"
          },
          "name": {
            "type": "string",
            "description": "商品名称"
          },
          "price": {
            "type": "number",
            "description": "商品单价"
          },
          "quantity": {
            "type": "integer",
            "description": "商品数量"
          },
          "subtotal": {
            "type": "number",
            "description": "小计"
          }
        }
      },
      "Order": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string",
            "description": "订单唯一标识"
          },
          "user_openid": {
            "type": "string",
            "description": "用户openID"
          },
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/OrderItem"
            }
          },
          "subtotal_amount": {
            "type": "number",
            "description": "商品小计"
          },
          "discount_amount": {
            "type": "number",
            "description": "折扣金额"
          },
          "discount_rate": {
            "type": "number",
            "description": "折扣率"
          },
          "total_amount": {
            "type": "number",
            "description": "订单总价"
          },
          "status": {
            "type": "string",
            "enum": ["pending", "paid", "shipped", "delivered", "cancelled"],
            "description": "订单状态"
          },
          "address_id": {
            "type": "string",
            "description": "收货地址ID"
          },
          "payment_method": {
            "type": "string",
            "description": "支付方式"
          },
          "referral_code": {
            "type": "string",
            "description": "使用的推荐码"
          },
          "referrer_openid": {
            "type": "string",
            "description": "推荐人openID"
          },
          "transaction_id": {
            "type": "string",
            "description": "微信支付交易ID"
          },
          "paid_at": {
            "type": "string",
            "format": "date-time",
            "description": "支付时间"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "创建时间"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "更新时间"
          }
        }
      },
      "OrderItem": {
        "type": "object",
        "properties": {
          "product_id": {
            "type": "string",
            "description": "商品ID"
          },
          "quantity": {
            "type": "integer",
            "description": "商品数量"
          },
          "price": {
            "type": "number",
            "description": "商品单价"
          }
        }
      },
      "Commission": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string",
            "description": "佣金唯一标识"
          },
          "commission_id": {
            "type": "string",
            "description": "佣金编号"
          },
          "user_openid": {
            "type": "string",
            "description": "用户openID"
          },
          "amount": {
            "type": "number",
            "description": "佣金金额"
          },
          "date": {
            "type": "string",
            "format": "date-time",
            "description": "佣金日期"
          },
          "status": {
            "type": "string",
            "enum": ["pending", "paid", "cancelled"],
            "description": "佣金状态"
          },
          "type": {
            "type": "string",
            "enum": ["referral", "agent"],
            "description": "佣金类型"
          },
          "description": {
            "type": "string",
            "description": "佣金描述"
          },
          "order_id": {
            "type": "string",
            "description": "关联订单ID"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "创建时间"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "更新时间"
          }
        }
      },
      "Referral": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string",
            "description": "推荐码唯一标识"
          },
          "referral_code": {
            "type": "string",
            "description": "推荐码"
          },
          "user_openid": {
            "type": "string",
            "description": "用户openID"
          },
          "used_by": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ReferralUsage"
            },
            "description": "使用该推荐码的用户列表"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "创建时间"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "更新时间"
          }
        }
      },
      "ReferralUsage": {
        "type": "object",
        "properties": {
          "user_openid": {
            "type": "string",
            "description": "用户openID"
          },
          "user_name": {
            "type": "string",
            "description": "用户名"
          },
          "used_at": {
            "type": "string",
            "format": "date-time",
            "description": "使用时间"
          },
          "order_id": {
            "type": "string",
            "description": "关联订单ID"
          },
          "commission": {
            "type": "number",
            "description": "佣金金额"
          },
          "status": {
            "type": "string",
            "enum": ["pending", "completed", "cancelled"],
            "description": "状态"
          }
        }
      },
      "Book": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string",
            "description": "书籍唯一标识"
          },
          "book_name": {
            "type": "string",
            "description": "书籍名称"
          },
          "book_version": {
            "type": "string",
            "description": "书籍版本"
          },
          "units": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Unit"
            },
            "description": "单元列表"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "创建时间"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "更新时间"
          }
        }
      },
      "Unit": {
        "type": "object",
        "properties": {
          "_id": {
            "type": "string",
            "description": "单元ID"
          },
          "unit_name": {
            "type": "string",
            "description": "单元名称"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "创建时间"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "更新时间"
          }
        }
      },
      "LoginResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "description": "响应状态码",
            "example": 200
          },
          "message": {
            "type": "string",
            "description": "响应消息",
            "example": "登录成功"
          },
          "data": {
            "type": "object",
            "properties": {
              "token": {
                "type": "string",
                "description": "JWT Token"
              },
              "user": {
                "$ref": "#/components/schemas/User"
              }
            }
          }
        }
      },
      "UserResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "description": "响应状态码",
            "example": 200
          },
          "message": {
            "type": "string",
            "description": "响应消息",
            "example": "操作成功"
          },
          "data": {
            "$ref": "#/components/schemas/User"
          }
        }
      },
      "ProductResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "description": "响应状态码",
            "example": 200
          },
          "message": {
            "type": "string",
            "description": "响应消息",
            "example": "操作成功"
          },
          "data": {
            "$ref": "#/components/schemas/Product"
          }
        }
      },
      "ProductListResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "description": "响应状态码",
            "example": 200
          },
          "message": {
            "type": "string",
            "description": "响应消息",
            "example": "操作成功"
          },
          "data": {
            "type": "object",
            "properties": {
              "products": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/Product"
                }
              },
              "pagination": {
                "$ref": "#/components/schemas/Pagination"
              }
            }
          }
        }
      },
      "CartResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "description": "响应状态码",
            "example": 200
          },
          "message": {
            "type": "string",
            "description": "响应消息",
            "example": "操作成功"
          },
          "data": {
            "$ref": "#/components/schemas/Cart"
          }
        }
      },
      "OrderResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "description": "响应状态码",
            "example": 200
          },
          "message": {
            "type": "string",
            "description": "响应消息",
            "example": "操作成功"
          },
          "data": {
            "$ref": "#/components/schemas/Order"
          }
        }
      },
      "OrderListResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "description": "响应状态码",
            "example": 200
          },
          "message": {
            "type": "string",
            "description": "响应消息",
            "example": "操作成功"
          },
          "data": {
            "type": "object",
            "properties": {
              "orders": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/Order"
                }
              },
              "pagination": {
                "$ref": "#/components/schemas/Pagination"
              }
            }
          }
        }
      },
      "ProgressResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "description": "响应状态码",
            "example": 200
          },
          "message": {
            "type": "string",
            "description": "响应消息",
            "example": "操作成功"
          },
          "data": {
            "$ref": "#/components/schemas/Progress"
          }
        }
      },
      "WordListResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "description": "响应状态码",
            "example": 200
          },
          "message": {
            "type": "string",
            "description": "响应消息",
            "example": "获取单词列表成功"
          },
          "data": {
            "type": "object",
            "properties": {
              "words": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/Word"
                }
              },
              "total_count": {
                "type": "integer",
                "description": "单词总数"
              }
            }
          }
        }
      },
      "WordCardResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "description": "响应状态码",
            "example": 200
          },
          "message": {
            "type": "string",
            "description": "响应消息",
            "example": "获取单词卡片成功"
          },
          "data": {
            "$ref": "#/components/schemas/Word"
          }
        }
      },
      "BookListResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "description": "响应状态码",
            "example": 200
          },
          "message": {
            "type": "string",
            "description": "响应消息",
            "example": "获取书籍列表成功"
          },
          "data": {
            "type": "object",
            "properties": {
              "books": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/Book"
                }
              },
              "pagination": {
                "$ref": "#/components/schemas/Pagination"
              }
            }
          }
        }
      },
      "ReferralValidationResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "example": 200
          },
          "message": {
            "type": "string",
            "example": "推荐码有效"
          },
          "data": {
            "type": "object",
            "properties": {
              "referral_code": {
                "type": "string"
              },
              "referrer_info": {
                "type": "object",
                "properties": {
                  "user_openid": {
                    "type": "string"
                  },
                  "user_name": {
                    "type": "string"
                  },
                  "school": {
                    "type": "string"
                  }
                }
              },
              "discount_rate": {
                "type": "number",
                "description": "推荐折扣率"
              }
            }
          }
        }
      },
      "ReferralResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "description": "响应状态码",
            "example": 200
          },
          "message": {
            "type": "string",
            "description": "响应消息",
            "example": "操作成功"
          },
          "data": {
            "$ref": "#/components/schemas/Referral"
          }
        }
      },
      "CommissionListResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "description": "响应状态码",
            "example": 200
          },
          "message": {
            "type": "string",
            "description": "响应消息",
            "example": "操作成功"
          },
          "data": {
            "type": "object",
            "properties": {
              "commissions": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/Commission"
                }
              },
              "total_amount": {
                "type": "number",
                "description": "总金额"
              },
              "pending_amount": {
                "type": "number",
                "description": "待处理金额"
              },
              "paid_amount": {
                "type": "number",
                "description": "已支付金额"
              }
            }
          }
        }
      },
      "QRCodeResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "description": "响应状态码",
            "example": 200
          },
          "message": {
            "type": "string",
            "description": "响应消息",
            "example": "生成小程序码成功"
          },
          "data": {
            "type": "object",
            "properties": {
              "qr_code_url": {
                "type": "string",
                "description": "小程序码图片URL"
              }
            }
          }
        }
      },
      "AgentUserListResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "description": "响应状态码",
            "example": 200
          },
          "message": {
            "type": "string",
            "description": "响应消息",
            "example": "操作成功"
          },
          "data": {
            "type": "object",
            "properties": {
              "users": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/User"
                }
              },
              "total_users": {
                "type": "integer",
                "description": "用户总数"
              }
            }
          }
        }
      },
      "AgentSalesResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "description": "响应状态码",
            "example": 200
          },
          "message": {
            "type": "string",
            "description": "响应消息",
            "example": "操作成功"
          },
          "data": {
            "type": "object",
            "properties": {
              "sales_summary": {
                "type": "object",
                "properties": {
                  "total_sales": {
                    "type": "number",
                    "description": "总销售额"
                  },
                  "total_orders": {
                    "type": "integer",
                    "description": "总订单数"
                  },
                  "total_commission": {
                    "type": "number",
                    "description": "总佣金"
                  }
                }
              }
            }
          }
        }
      },
      "WithdrawResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "description": "响应状态码",
            "example": 200
          },
          "message": {
            "type": "string",
            "description": "响应消息",
            "example": "操作成功"
          },
          "data": {
            "type": "object",
            "properties": {
              "withdraw_id": {
                "type": "string",
                "description": "提取记录ID"
              },
              "amount": {
                "type": "number",
                "description": "提取金额"
              },
              "withdraw_method": {
                "type": "string",
                "description": "提取方式"
              },
              "status": {
                "type": "string",
                "enum": ["pending", "processing", "completed", "failed"],
                "description": "提取状态"
              },
              "estimated_arrival": {
                "type": "string",
                "format": "date-time",
                "description": "预计到账时间"
              }
            }
          }
        }
      },
      "WechatPayResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "description": "响应状态码",
            "example": 200
          },
          "message": {
            "type": "string",
            "description": "响应消息",
            "example": "支付订单创建成功"
          },
          "data": {
            "type": "object",
            "properties": {
              "prepay_id": {
                "type": "string",
                "description": "预支付交易会话标识"
              },
              "app_id": {
                "type": "string",
                "description": "小程序ID"
              },
              "time_stamp": {
                "type": "string",
                "description": "时间戳"
              },
              "nonce_str": {
                "type": "string",
                "description": "随机字符串"
              },
              "package": {
                "type": "string",
                "description": "扩展字段"
              },
              "sign_type": {
                "type": "string",
                "description": "签名方式"
              },
              "pay_sign": {
                "type": "string",
                "description": "签名"
              }
            }
          }
        }
      },
      "HealthResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "description": "响应状态码",
            "example": 200
          },
          "message": {
            "type": "string",
            "description": "响应消息",
            "example": "服务运行正常"
          },
          "data": {
            "type": "object",
            "properties": {
              "status": {
                "type": "string",
                "example": "ok"
              }
            }
          }
        }
      },
      "Pagination": {
        "type": "object",
        "properties": {
          "page": {
            "type": "integer",
            "description": "当前页码",
            "example": 1
          },
          "limit": {
            "type": "integer",
            "description": "每页数量",
            "example": 20
          },
          "total": {
            "type": "integer",
            "description": "总记录数",
            "example": 100
          },
          "total_pages": {
            "type": "integer",
            "description": "总页数",
            "example": 5
          }
        }
      },
      "SuccessResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "description": "响应状态码",
            "example": 200
          },
          "message": {
            "type": "string",
            "description": "响应消息",
            "example": "操作成功"
          }
        }
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "description": "错误状态码",
            "example": 400
          },
          "message": {
            "type": "string",
            "description": "错误消息",
            "example": "请求参数错误"
          },
          "error": {
            "type": "string",
            "description": "错误详情",
            "example": "VALIDATION_ERROR"
          }
        }
      }
    },
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "请在请求头中添加 Authorization: Bearer {token}"
      }
    }
  },
  "servers": [],
  "security": []
}