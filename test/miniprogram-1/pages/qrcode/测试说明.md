# 二维码生成功能测试说明

## 功能概述

小程序二维码生成测试模块，用于测试微信小程序码的生成功能。通过调用后端API，可以生成自定义参数的小程序码，支持各种配置选项。

## 测试功能

### 核心功能
- ✅ 生成不限制数量的小程序码
- ✅ 自定义场景值和跳转页面
- ✅ 配置二维码样式参数
- ✅ 预览和保存生成的二维码
- ✅ 支持多种环境版本（正式版、体验版、开发版）

### 参数配置
- **场景值 (scene)**: 自定义场景参数，1-32个字符
- **跳转页面 (page)**: 扫码后跳转的小程序页面路径
- **二维码宽度 (width)**: 二维码图片宽度，范围100-1280px
- **环境版本 (env_version)**: 正式版/体验版/开发版
- **路径检查 (check_path)**: 是否检查页面路径有效性
- **自动配色 (auto_color)**: 是否自动配置二维码颜色
- **线条颜色 (line_color)**: 自定义RGB颜色值
- **透明底色 (is_hyaline)**: 是否使用透明底色

## 测试流程

### 1. 快速预设测试
1. 点击预设场景（首页、推荐页、学习页、商店页）
2. 系统自动填入对应的scene和page参数
3. 点击"生成二维码"按钮

### 2. 自定义参数测试
1. 手动输入场景值（如：test_custom_001）
2. 设置跳转页面路径
3. 调整二维码宽度
4. 选择环境版本
5. 配置高级选项（颜色、透明度等）
6. 生成二维码

### 3. 二维码操作测试
1. 预览：点击二维码图片或预览按钮
2. 保存：保存二维码到手机相册
3. 复制：复制场景值到剪贴板
4. 清空：重置所有表单参数

## 后端接口

### API路由
```
POST /api/wxacode/unlimited
```

### 请求参数
```json
{
  "scene": "test_scene",           // 必需：场景值
  "page": "pages/index/index",     // 可选：页面路径
  "width": 280,                    // 可选：宽度
  "check_path": true,              // 可选：检查路径
  "env_version": "release",        // 可选：环境版本
  "auto_color": false,             // 可选：自动配色
  "line_color": {                  // 可选：线条颜色
    "r": 0,
    "g": 0,
    "b": 0
  },
  "is_hyaline": false              // 可选：透明底色
}
```

### 响应数据
```json
{
  "success": true,
  "message": "获取小程序码成功",
  "data": {
    "image_base64": "iVBORw0KGgoAAAANSUhEUgAA...", // Base64编码的图片
    "content_type": "image/png",
    "scene": "test_scene",
    "page": "pages/index/index"
  }
}
```

## 测试场景

### 基础场景
1. **默认参数测试**: 仅填入必需的scene参数
2. **完整参数测试**: 填入所有可选参数
3. **边界值测试**: 最大/最小宽度、颜色值边界

### 错误场景
1. **空场景值**: 测试必需参数验证
2. **超长场景值**: 测试32字符限制
3. **无效页面路径**: 测试路径检查功能
4. **未登录状态**: 测试权限控制

### 样式场景
1. **默认样式**: 使用微信默认样式
2. **自定义颜色**: 设置特定RGB颜色
3. **透明背景**: 启用透明底色
4. **不同尺寸**: 测试各种宽度设置

## 注意事项

### 使用限制
- 需要用户登录后才能使用
- 场景值必须为1-32个可见字符
- 依赖微信access_token的有效性
- 生成的二维码有效期遵循微信规则

### 常见问题
1. **生成失败**: 检查网络连接和access_token
2. **保存失败**: 检查相册访问权限
3. **预览问题**: 确保图片数据完整性
4. **参数错误**: 验证输入参数格式

### 测试建议
1. 先使用预设场景进行快速测试
2. 逐步测试各种参数组合
3. 验证生成的二维码是否可以正常扫描
4. 测试不同设备和网络环境下的表现

## 实际应用场景

### 推广应用
- 生成推荐码对应的二维码
- 创建活动页面专属二维码
- 制作分享用的二维码图片

### 功能跳转
- 直接跳转到特定功能页面
- 携带参数启动小程序
- 实现深度链接功能

### 数据追踪
- 通过scene参数追踪来源
- 统计不同渠道的效果
- 分析用户行为路径

---

**测试完成标准**: 成功生成二维码，并能保存到相册，扫描后正确跳转到指定页面。